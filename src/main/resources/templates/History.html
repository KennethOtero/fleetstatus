<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="ISO-8859-1"/>
  <title>Fleet History</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</head>
<body class="p-3 mb-2 text-white">

  <div th:replace="~{fragments/navbar :: sideMenu}"></div>

  <div class="container">
    <div>
      <h2 class="PageTitle">Fleet History</h2>
    </div>
    <br>

    <!-- Filter form -->
    <div class="container mb-4">
      <div class="row">
        <div class="col-sm-3">
          <label for="carrierSelect" class="form-label">Carrier:</label>
          <select id="carrierSelect" class="form-select">
            <option value="">Select Carrier</option>
          </select>
        </div>
        <div class="col-sm-3">
          <label for="typeSelect" class="form-label">Type:</label>
          <select id="typeSelect" class="form-select">
            <option value="">Select Type</option>
          </select>
        </div>
        <div class="col-sm-3">
          <label for="tailSelect" class="form-label">Tail Number:</label>
          <select id="tailSelect" class="form-select">
            <option value="">Select Tail Number</option>
          </select>
        </div>
        <div class="col-sm-3">
          <label for="reasonIds" class="form-label">Reason:</label>
          <select id="reasonIds" class="form-select" multiple>
            <!-- Dynamically loading reason options -->
          </select>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-sm-3">
          <button class="btn btn-primary border-0" onclick="getEventHistory()">Filter</button>
        </div>
      </div>
    </div>

    <!-- Export and Report Buttons -->
    <div class="row table-buttons">
      <div class="col-sm">
        <button type="button" class="btn btn-primary border-0" onclick="generateReport()">Aircraft Down Time Report</button>
        <button type="button" class="btn btn-primary border-0" onclick="exportData()">Export</button>
      </div>
    </div>

    <!-- Event History Table -->
    <div class="container">
      <table class="table text-white">
        <thead>
        <tr>
          <th scope="col">Event Date</th>
          <th scope="col">Tail #</th>
          <th scope="col">Reason</th>
          <th scope="col">Remark</th>
          <th scope="col">Next Update</th>
        </tr>
        </thead>
        <tbody id="statusDisplay">
        <!-- Dynamic event data will be inserted here -->
        </tbody>
      </table>
    </div>
  </div>

  <script src="/js/History/HistoryTable.js" rel="script"></script>
</body>
</html>
