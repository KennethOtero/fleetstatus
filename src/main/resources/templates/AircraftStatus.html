<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="ISO-8859-1"/>
	<title>Aircraft Status</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/addTailModal.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</head>
<body class="p-3 mb-2 bg-dark text-white">

    <div th:replace="~{fragments/navbar :: sideMenu}"></div>

    <h2 class="AOSText">ABC Fleet Status: </h2>
    <h5 class="formTitle">Add MX/AOG/Damage Event:</h5>

    <form action="#" th:action="@{/SubmitEvent}" method="post" th:object="${aircraftDTO}">
        <div class="row" id="addAircraftForm">
            <div class="col">
                <select class="form-select lg-mb-3" id="tailNumberSelect" th:field="*{tailNumber}">
                    <option th:value="0" selected>Select Tail...</option>
                    <option th:value="650GT">650GT</option>
                    <option th:value="651GT">651GT</option>
                    <option th:value="797AX">797AX</option>
                </select>
            </div>
            <div class="col">
                <select class="form-select lg-mb-3" id="reasonSelect" th:field="*{reason}">
                    <option th:value="0" selected>Reason...</option>
                    <option th:value="Maintenance">Maintenance</option>
                    <option th:value="AOG">AOG</option>
                    <option th:value="DAMAGE">DAMAGE</option>
                </select>
            </div>
            <div class="col">
                <input type="text" class="form-control" placeholder="Next Update" aria-label="Next Update" th:field="*{nextUpdate}">
            </div>
            <div class="col">
                <input type="text" class="form-control" placeholder="Remark" aria-label="Remark" th:field="*{remark}">
            </div>
            <div class="col">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
            <div class="col">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTailModal">Add New Tail</button>
            </div>
          
            <div class="col">
                <button type="submit" class="btn btn-primary">Remove Tail</button>
            </div>
        </div>
    </form>

    <div class="modal fade addTailModal" id="addTailModal" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal-title">Add a New Tail</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger d-none" id="showAlert" role="alert">
                          This is a danger alert - check it out!
                    </div>
                    <label for="tailNumber">Enter Tail Number</label>
                    <input type="text" class="form-control" id="tailNumber" placeholder="e.g. N123XY">

                    <label for="reason">Select Reason</label>
                    <select id="reason" class="form-select lg-mb-3">
                        <option value="Maintenance">Maintenance</option>
                        <option value="AOG">AOG</option>
                        <option value="Damage">Damage</option>
                    </select>

                    <label for="dtmNextUpdate">Enter Next Update</label>
                    <input type="datetime-local" class="form-control" id="dtmNextUpdate">

                    <label for="strRemark">Enter Remark</label>
                    <input type="text" class="form-control" id="strRemark" placeholder="e.g. Bird strike to the #1 engine">

                    <label for="serviceStatus">Enter Service Status</label>
                    <select id="serviceStatus" class="form-select lg-mb-3">
                        <option value="0">Out of Service</option>
                        <option value="1">In Service</option>
                    </select>

                    <label for="carrier">Select Carrier</label>
                    <select id="carrier" class="form-select lg-mb-3">
                        <option value="1">Cargojet</option>
                    </select>

                    <label for="startTime">Enter Start Time</label>
                    <input type="datetime-local" class="form-control" id="startTime">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="saveAircraft()">ADD</button>
                </div>
            </div>
        </div>
    </div>

    <table class="table" id="tableDisplay">
        <thead>
            <tr class="text-white bg-dark">
                <th scope="col">Status</th>
                <th scope="col">Tail #</th>
                <th scope="col">Reason</th>
                <th scope="col">Next Update</th>
                <th scope="col">Remark</th>
                <th scope="col">Back in Service</th>
                <th scope="col">Down Time</th>
            </tr>
        </thead>
        <tbody id="statusDisplay">
            <tr class="text-white bg-dark" th:each="aircraftDTO: ${outOfServiceAircraft}">
			<td>
	          	<img th:if="${aircraftDTO.backInService}" src="/images/SmallGreenAircraft.png" alt="aircraft status image">
				<img th:unless="${aircraftDTO.backInService}" src="/images/SmallRedAircraft.png" alt="aircraft status image">
			</td>            
            <td th:text="${aircraftDTO.tailNumber}"></td>
            <td th:text="${aircraftDTO.reason}"></td>
            <td th:text="${aircraftDTO.nextUpdate}"></td>
            <td th:text="${aircraftDTO.remark}"></td>
            <td><input type="checkbox" id="isFixed" name="isFixed" value="false"></td>
            <td th:id="'downtime-' + ${aircraftDTO.aircraftId}">Loading...</td>
            </tr>
        </tbody>
    </table>
      
    <footer id="footer">
        <p>ABC Fleet Status</p>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/js/SideMenu.js" rel="script"></script>
    <script src="/js/Downtime.js" rel="script"></script>
    <script src="/js/AddAircraft.js" rel="script"></script>
</body>
</html>